version: "2.4"

services:
  simple-web-vlm:
    build: .
    image: simple-web-vlm:latest
    ports:
      - "${PORT:-8000}:8000"
    environment:
      - HF_HOME=/models
      - DEVICE=${DEVICE:-cpu}
      - VQA_MODEL_ID=HuggingFaceTB/SmolVLM-256M-Instruct
      - PORT=8000
    volumes:
      - hf_cache:/models
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities: ["gpu"]

volumes:
  hf_cache:
